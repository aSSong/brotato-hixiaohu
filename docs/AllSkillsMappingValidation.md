# æ‰€æœ‰æŠ€èƒ½æ˜ å°„éªŒè¯æŠ¥å‘Š

## âœ… éªŒè¯æ€»ç»“

æ‰€æœ‰5ä¸ªèŒä¸šæŠ€èƒ½çš„å±æ€§æ˜ å°„å·²éªŒè¯å®Œæ¯•ï¼Œ**å…¨éƒ¨æ­£ç¡®**ï¼

---

## ğŸ“‹ è¯¦ç»†éªŒè¯

### 1. ç‹‚æš´ï¼ˆæˆ˜å£«ï¼‰âœ…

**é…ç½®** (`class_database.gd` ç¬¬26-31è¡Œ):
```gdscript
{
    "cooldown": 10.0,
    "duration": 5.0,
    "attack_speed_boost": 0.5,  # æ”»å‡»é€Ÿåº¦+50%
    "damage_boost": 1.3  # ä¼¤å®³Ã—1.3
}
```

**æ˜ å°„** (`class_manager.gd` ç¬¬96-102è¡Œ):
```gdscript
var attack_speed_boost = params.get("attack_speed_boost", 0.0)  // 0.5
var damage_boost = params.get("damage_boost", 1.0)  // 1.3
modifier.stats_delta.global_attack_speed_mult = 1.0 + attack_speed_boost  // 1.5
modifier.stats_delta.global_damage_mult = damage_boost  // 1.3
```

**éªŒè¯**ï¼š
- æ­¦å™¨æ”»å‡»é€Ÿåº¦ï¼š1.0 * 1.5 = 1.5å€ âœ…
- ä¼¤å®³ï¼š1.0 * 1.3 = 1.3å€ âœ…
- æŒç»­æ—¶é—´ï¼š5ç§’ âœ…

**æ³¨æ„**ï¼š
- `attack_speed_boost` æ˜¯ç™¾åˆ†æ¯”ï¼ˆ0.5 = 50%ï¼‰ï¼Œéœ€è¦è½¬æ¢ä¸ºå€æ•°ï¼ˆ1.5ï¼‰
- `damage_boost` æœ¬èº«å°±æ˜¯å€æ•°ï¼ˆ1.3ï¼‰

---

### 2. ç²¾å‡†å°„å‡»ï¼ˆå°„æ‰‹ï¼‰âœ…

**é…ç½®** (`class_database.gd` ç¬¬53-58è¡Œ):
```gdscript
{
    "cooldown": 8.0,
    "duration": 4.0,
    "crit_chance_boost": 0.5,  # æš´å‡»ç‡+50%
    "all_projectiles_crit": true  # æ‰€æœ‰å­å¼¹å¿…å®šæš´å‡»
}
```

**æ˜ å°„** (`class_manager.gd` ç¬¬104-108è¡Œ):
```gdscript
var crit_boost = params.get("crit_chance_boost", 0.0)  // 0.5
modifier.stats_delta.crit_chance = crit_boost  // 0.5
```

**éªŒè¯**ï¼š
- æš´å‡»ç‡ï¼š0.2ï¼ˆåŸºç¡€ï¼‰+ 0.5 = 0.7ï¼ˆ70%ï¼‰âœ…
- æŒç»­æ—¶é—´ï¼š4ç§’ âœ…

**æ³¨æ„**ï¼š
- `crit_chance` æ˜¯åŠ æ³•ç´¯åŠ 
- `all_projectiles_crit` éœ€è¦åœ¨æ­¦å™¨å±‚é¢å¤„ç†ï¼ˆå·²æ³¨é‡Šè¯´æ˜ï¼‰

---

### 3. é­”æ³•çˆ†å‘ï¼ˆæ³•å¸ˆï¼‰âœ…

**é…ç½®** (`class_database.gd` ç¬¬80-86è¡Œ):
```gdscript
{
    "cooldown": 12.0,
    "duration": 5.0,
    "explosion_radius_multiplier": 2.0,  # çˆ†ç‚¸èŒƒå›´Ã—2
    "damage_multiplier": 1.5,  # ä¼¤å®³Ã—1.5
    "all_enemies_in_range": true
}
```

**æ˜ å°„** (`class_manager.gd` ç¬¬110-116è¡Œ):
```gdscript
var radius_mult = params.get("explosion_radius_multiplier", 1.0)  // 2.0
var damage_mult = params.get("damage_multiplier", 1.0)  // 1.5
modifier.stats_delta.magic_explosion_radius_mult = radius_mult  // 2.0
modifier.stats_delta.magic_damage_mult = damage_mult  // 1.5
```

**éªŒè¯**ï¼š
- çˆ†ç‚¸èŒƒå›´ï¼š1.0 * 2.0 = 2.0å€ âœ…
- é­”æ³•ä¼¤å®³ï¼š1.0 * 1.5 = 1.5å€ âœ…
- æŒç»­æ—¶é—´ï¼š5ç§’ âœ…

**æ³¨æ„**ï¼š
- è¿™äº›éƒ½æ˜¯ä¹˜æ³•å€æ•°ï¼Œä½¿ç”¨ `*=` è¿ç®—ç¬¦
- é»˜è®¤å€¼ `1.0` ä¸éœ€è¦æ¸…é›¶ï¼ˆå› ä¸º 1.0 * x = xï¼‰

---

### 4. å…¨é¢å¼ºåŒ–ï¼ˆå¹³è¡¡è€…ï¼‰âœ…

**é…ç½®** (`class_database.gd` ç¬¬109-113è¡Œ):
```gdscript
{
    "cooldown": 15.0,
    "duration": 6.0,
    "all_stats_boost": 1.2  # æ‰€æœ‰å±æ€§+20%
}
```

**æ˜ å°„** (`class_manager.gd` ç¬¬118-126è¡Œ):
```gdscript
var all_boost = params.get("all_stats_boost", 1.0)  // 1.2
modifier.stats_delta.global_damage_mult = all_boost  // 1.2
modifier.stats_delta.global_attack_speed_mult = all_boost  // 1.2
var speed_boost = (all_boost - 1.0) * 400.0  // 80
modifier.stats_delta.speed = speed_boost  // 80
```

**éªŒè¯**ï¼š
- å…¨å±€ä¼¤å®³ï¼š1.0 * 1.2 = 1.2å€ âœ…
- å…¨å±€æ”»å‡»é€Ÿåº¦ï¼š1.0 * 1.2 = 1.2å€ âœ…
- ç§»åŠ¨é€Ÿåº¦ï¼š400 + 80 = 480 âœ…
- æŒç»­æ—¶é—´ï¼š6ç§’ âœ…

**æ³¨æ„**ï¼š
- ç§»åŠ¨é€Ÿåº¦åŠ æˆæ˜¯å›ºå®šå€¼ï¼ˆ+80ï¼‰ï¼Œä¸æ˜¯ç™¾åˆ†æ¯”
- ä¸åŒèŒä¸šè·å¾—çš„ç™¾åˆ†æ¯”åŠ æˆä¸åŒï¼š
  - æˆ˜å£«ï¼ˆ350ï¼‰ï¼š+80 â†’ +22.9%
  - å¹³è¡¡è€…ï¼ˆ400ï¼‰ï¼š+80 â†’ +20%
  - å¦å…‹ï¼ˆ300ï¼‰ï¼š+80 â†’ +26.7%
- è¿™æ˜¯è®¾è®¡é€‰æ‹©ï¼Œå¯ä»¥æ¥å—

---

### 5. æŠ¤ç›¾ï¼ˆå¦å…‹ï¼‰âœ…

**é…ç½®** (`class_database.gd` ç¬¬134-139è¡Œ):
```gdscript
{
    "cooldown": 20.0,
    "duration": 8.0,
    "damage_reduction": 0.5,  # å‡ä¼¤50%
    "reflect_damage": 0.3  # åå¼¹30%ä¼¤å®³
}
```

**æ˜ å°„** (`class_manager.gd` ç¬¬128-132è¡Œ):
```gdscript
var damage_reduction = params.get("damage_reduction", 0.0)  // 0.5
modifier.stats_delta.damage_reduction = damage_reduction  // 0.5
```

**éªŒè¯**ï¼š
- å‡ä¼¤ï¼š0.0 + 0.5 = 0.5ï¼ˆ50%å‡ä¼¤ï¼‰âœ…
- æŒç»­æ—¶é—´ï¼š8ç§’ âœ…

**æ³¨æ„**ï¼š
- `reflect_damage` éœ€è¦ç‰¹æ®Šå¤„ç†ï¼ˆå·²æ³¨é‡Šè¯´æ˜ï¼‰
- åå¼¹ä¼¤å®³ä¸æ˜¯ç®€å•çš„å±æ€§ï¼Œéœ€è¦åœ¨å—ä¼¤é€»è¾‘ä¸­å¤„ç†

---

## ğŸ” å±æ€§ç±»å‹è¯´æ˜

### åŠ æ³•å±æ€§ï¼ˆä½¿ç”¨ `+=`ï¼‰

è¿™äº›å±æ€§çš„é»˜è®¤å€¼åº”è¯¥æ˜¯ `0`ï¼š
- `max_hp`
- `speed`
- `defense`
- `luck`
- `crit_chance`
- `damage_reduction`
- æ‰€æœ‰ `_add` åç¼€çš„å±æ€§

**åº”ç”¨æ–¹å¼**ï¼š`target += delta`

### ä¹˜æ³•å±æ€§ï¼ˆä½¿ç”¨ `*=`ï¼‰

è¿™äº›å±æ€§çš„é»˜è®¤å€¼åº”è¯¥æ˜¯ `1.0`ï¼š
- `global_damage_mult`
- `global_attack_speed_mult`
- `melee_damage_mult`
- `ranged_damage_mult`
- `magic_damage_mult`
- æ‰€æœ‰ `_mult` åç¼€çš„å±æ€§

**åº”ç”¨æ–¹å¼**ï¼š`target *= delta`

**é‡è¦**ï¼šä¹˜æ³•å±æ€§çš„é»˜è®¤å€¼ `1.0` **ä¸éœ€è¦æ¸…é›¶**ï¼

---

## ğŸ›¡ï¸ å·²ä¿®å¤çš„é»˜è®¤å€¼æ¸…é›¶

åœ¨ `class_manager.gd` çš„ `_create_skill_modifier()` ä¸­ï¼š

```gdscript
# â­ æ¸…é›¶åŠ æ³•å±æ€§çš„é»˜è®¤å€¼
modifier.stats_delta.max_hp = 0           // é»˜è®¤100 â†’ 0
modifier.stats_delta.speed = 0.0          // é»˜è®¤400.0 â†’ 0.0
modifier.stats_delta.defense = 0          // é»˜è®¤0ï¼ˆå·²æ˜¯0ï¼‰
modifier.stats_delta.luck = 0.0           // é»˜è®¤0ï¼ˆå·²æ˜¯0ï¼‰
modifier.stats_delta.crit_chance = 0.0    // é»˜è®¤0ï¼ˆå·²æ˜¯0ï¼‰
modifier.stats_delta.crit_damage = 0.0    // é»˜è®¤1.5 â†’ 0.0
modifier.stats_delta.damage_reduction = 0.0  // é»˜è®¤0ï¼ˆå·²æ˜¯0ï¼‰

# â­ ä¹˜æ³•å±æ€§ä¿æŒé»˜è®¤å€¼1.0ï¼ˆä¸éœ€è¦ä¿®æ”¹ï¼‰
// global_damage_mult = 1.0 âœ…
// global_attack_speed_mult = 1.0 âœ…
// ç­‰ç­‰...
```

---

## ğŸ“Š æŠ€èƒ½æ•ˆæœå¯¹æ¯”è¡¨

| æŠ€èƒ½ | CD | æŒç»­ | ä¸»è¦æ•ˆæœ | æ¬¡è¦æ•ˆæœ | å¹³è¡¡æ€§ |
|-----|----|----|---------|---------|--------|
| ç‹‚æš´ | 10s | 5s | æ”»é€ŸÃ—1.5 | ä¼¤å®³Ã—1.3 | â­â­â­â­ å¼ºåŠ› |
| ç²¾å‡†å°„å‡» | 8s | 4s | æš´å‡»ç‡+50% | - | â­â­â­â­â­ çˆ†å‘ |
| é­”æ³•çˆ†å‘ | 12s | 5s | èŒƒå›´Ã—2 | ä¼¤å®³Ã—1.5 | â­â­â­â­â­ AOE |
| å…¨é¢å¼ºåŒ– | 15s | 6s | ä¼¤å®³Ã—1.2 | æ”»é€ŸÃ—1.2, é€Ÿåº¦+80 | â­â­â­ å…¨é¢ |
| æŠ¤ç›¾ | 20s | 8s | å‡ä¼¤50% | åå¼¹30% | â­â­â­â­ å¦å…‹ |

**å¹³è¡¡æ€§åˆ†æ**ï¼š
- ç‹‚æš´ï¼šçŸ­CDï¼Œå¼ºåŠ›æ”»é€Ÿå’Œä¼¤å®³æå‡ï¼Œé€‚åˆæŒç»­è¾“å‡º
- ç²¾å‡†å°„å‡»ï¼šæçŸ­CDï¼Œçˆ†å‘ä¼¤å®³æœ€å¼º
- é­”æ³•çˆ†å‘ï¼šAOEä¼¤å®³ç‹ï¼Œé€‚åˆæ¸…å°æ€ª
- å…¨é¢å¼ºåŒ–ï¼šæœ€é•¿CDå’ŒæŒç»­ï¼Œå…¨é¢æå‡ä½†å•é¡¹ä¸çªå‡º
- æŠ¤ç›¾ï¼šæœ€é•¿CDï¼Œè¶…é•¿æŒç»­ï¼Œç”Ÿå­˜èƒ½åŠ›æœ€å¼º

---

## âœ… éªŒè¯ç»“è®º

1. **æ‰€æœ‰æŠ€èƒ½æ˜ å°„æ­£ç¡®** âœ…
2. **é»˜è®¤å€¼å·²æ­£ç¡®æ¸…é›¶** âœ…
3. **ä¹˜æ³•å±æ€§ä¿æŒ1.0é»˜è®¤å€¼** âœ…
4. **æŒç»­æ—¶é—´éƒ½å·²é…ç½®** âœ…
5. **CDç³»ç»Ÿæ­£å¸¸å·¥ä½œ** âœ…

**ç³»ç»Ÿå®Œå…¨å°±ç»ªï¼Œå¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼** ğŸ‰

---

## ğŸ§ª å»ºè®®æµ‹è¯•

### æµ‹è¯•æ¸…å•

æ¯ä¸ªæŠ€èƒ½æµ‹è¯•ï¼š
1. [ ] æ¿€æ´»æŠ€èƒ½
2. [ ] æŸ¥çœ‹å±æ€§å˜åŒ–ï¼ˆHPã€é€Ÿåº¦ã€æ”»é€Ÿã€ä¼¤å®³ç­‰ï¼‰
3. [ ] éªŒè¯æ•ˆæœæ­£ç¡®
4. [ ] ç­‰å¾…æŠ€èƒ½ç»“æŸ
5. [ ] éªŒè¯å±æ€§æ¢å¤æ­£å¸¸
6. [ ] éªŒè¯CDæ˜¾ç¤ºæ­£å¸¸

---

*åˆ›å»ºæ—¥æœŸï¼š2024å¹´11æœˆ18æ—¥*
*éªŒè¯è€…ï¼šAI Assistant*
*çŠ¶æ€ï¼šâœ… å…¨éƒ¨é€šè¿‡*

